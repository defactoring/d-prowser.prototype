"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{91:function(e,n,t){t.d(n,{gV:function(){return eb},cL:function(){return eS},Mo:function(){return eX}});var r=t(5944),i=t(7294),o=t(828),a=t(7297),u=t(6829),l=t(917);function c(){var e=(0,a.Z)(["\n    @media screen and (min-width: ",") {\n      max-width: 800px;\n      margin: 40px auto 120px;\n      gap: 8px;\n    }\n\n    @media screen and (min-width: ",") {\n      max-width: 1280px;\n      margin: 40px auto 120px;\n      gap: 48px;\n    }\n  "]);return c=function(){return e},e}var s=(0,u.Z)("div",{target:"e17uzkov0"})("box-sizing:border-box;padding:16px;"),p=(0,u.Z)("div",{target:"e17uzkov4"})("display:flex;justify-content:center;align-items:flex-start;flex-wrap:wrap;gap:0;margin-bottom:120px;",function(e){var n=e.theme.devices;return(0,l.iv)(c(),n.mobile,n.desktop)}),d=(0,u.Z)("div",{target:"e17uzkov5"})("position:sticky;bottom:40px;left:0;right:0;display:flex;justify-content:center;gap:25px;");function f(){var e=(0,a.Z)(["\n    @media screen and (min-width: ",") {\n      padding: 24px 16px 8px;\n    }\n  "]);return f=function(){return e},e}function h(){var e=(0,a.Z)(["\n    @media screen and (min-width: ",") {\n      display: inline-flex;\n      top: 4px;\n      right: 0;\n    }\n  "]);return h=function(){return e},e}var g=(0,u.Z)("div",{target:"eb2dsom0"})("position:relative;border-radius:4px;padding:8px 8px 4px;:hover{background:lightgray;}",function(e){var n=e.theme.devices;return(0,l.iv)(f(),n.mobile)}),Z=(0,u.Z)("button",{target:"eb2dsom1"})("position:absolute;cursor:pointer;background:none;border:none;display:none;align-items:center;height:16px;appearance:none;color:#f7fafd;",function(e){var n=e.theme.devices;return(0,l.iv)(h(),n.mobile)}),m=(0,u.Z)("a",{target:"eb2dsom2"})("width:72px;display:inline-flex;flex-direction:column;justify-content:center;text-decoration:none;color:black;gap:4px;"),v=(0,u.Z)("img",{target:"eb2dsom3"})("width:72px;height:72px;border-radius:5px;"),b=(0,u.Z)("p",{target:"eb2dsom4"})("margin:0;text-align:center;text-overflow:ellipsis;overflow:hidden;font-size:12px;"),x=t(9301),k=t(7722),w=t(7832),y=t(5819),S=t(2885),C=function(e){var n=e.open,t=e.bookmark,a=(0,i.createRef)(),u=(0,o.Z)(i.useState(null),2),l=u[0],c=u[1],s=function(){c(null)},p=(0,k.y$)().storage,d=(0,k.S7)().filter,f=(0,i.useCallback)(function(){(0,S.Od)(p,t.id).then(function(){return d()})},[]),h=(0,i.useCallback)(function(){!0==confirm("ブックマークを削除しますか？")&&f()},[]);return(0,r.BX)(g,{onContextMenu:function(e){e.preventDefault(),c(a.current)},ref:a,children:[(0,r.tZ)(Z,{onClick:function(){c(a.current)},children:(0,r.tZ)(x.Z,{fontSize:"large"})}),(0,r.BX)(w.Z,{id:"basic-menu",anchorEl:l,open:!!l,onClose:s,onClick:s,MenuListProps:{"aria-labelledby":"basic-button"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,r.tZ)(y.Z,{onClick:n,children:"Edit"}),(0,r.tZ)(y.Z,{onClick:h,children:"Delete"})]}),(0,r.BX)(m,{href:t.url,target:"_blank",children:[(0,r.tZ)(v,{src:t.icon}),(0,r.tZ)(b,{children:t.name})]})]})},z=t(2428),B=(0,u.Z)("div",{target:"e17s4noa0"})("flex-wrap:wrap;gap:16px;cursor:pointer;width:72px;height:72px;background-color:#fff;-webkit-box-shadow:0 3px 5px rgba(0,0,0,0.3);box-shadow:0 3px 5px rgba(0,0,0,0.3);border-radius:50%;"),_=(0,u.Z)("div",{target:"e17s4noa1"})("padding:13px 13px 13px;border-radius:50%;:hover{background:#F2F2F2;}"),I=(0,u.Z)(z.Z,{target:"e17s4noa2"})("width:72px;height:72px;"),O=t(2389),X=function(e){var n=e.open;return(0,r.tZ)(_,{children:(0,r.tZ)(O.Z,{title:"AddIcon",children:(0,r.tZ)(B,{role:"button","aria-pressed":!1,onClick:n,children:(0,r.tZ)(I,{})})})})},A=function(e){var n=e.open,t=(0,k.S7)().bookmarks;return(0,r.BX)(s,{children:[(0,r.tZ)(p,{children:t.map(function(e){return(0,r.tZ)(C,{open:function(){return n(e)},bookmark:e},e.id)})}),(0,r.tZ)(d,{children:(0,r.tZ)(X,{open:function(){return n()}})})]})},H=t(1799),j=t(9396),E=(0,u.Z)("form",{target:"e1x1n83d0"})("box-sizing:border-box;max-width:400px;width:80vw;padding:24px 16px 16px;background:#fff;display:grid;align-items:center;gap:20px;"),L=(0,u.Z)("h2",{target:"e1x1n83d1"})("text-align:center;margin:0;"),M=t(8262),U=t(9502),F=t(1404),P=t(642),D=t(3321),R=t(7568),V=t(6305),T=t(655),K=t(7536),N=t(1604),W=t(6312),Y=N.z.object({name:N.z.string().min(1),url:N.z.string().url(),tags:N.z.string().array()}),$=function(e){var n,t=e.bookmark,r=e.onSuccess,o=(0,i.useMemo)(function(){return null!=t?t:{name:"",url:"",tags:[]}},[t]),a=(0,K.cI)({defaultValues:o,resolver:(0,W.F)(Y)}),u=a.register,l=a.control,c=a.reset,s=a.handleSubmit,p=a.formState.errors,d=(0,k.S7)(),f=d.filter,h=d.bookmarks,g=(0,k.y$)().storage,Z=(0,i.useCallback)(s((n=(0,R.Z)(function(e){return(0,T.__generator)(this,function(n){switch(n.label){case 0:if(void 0!==o.id)return[3,2];return[4,(0,S.IH)(g,(0,S.Ue)(e))];case 1:return n.sent(),[3,4];case 2:return[4,(0,S.Pj)(g,o.id,e)];case 3:n.sent(),n.label=4;case 4:return[4,f().then(function(){return c()}).then(r)];case 5:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)})),[o,s,g,c,r]);return(0,i.useEffect)(function(){return c(o)},[c,o]),{register:u,control:l,onSubmit:Z,errors:p,reset:c,tags:(0,V.Z)(new Set(h.flatMap(function(e){return e.tags}).filter(function(e){return!!e})))}},q=function(e){var n=e.open,t=e.onClose,i=$({bookmark:e.bookmark,onSuccess:t}),o=i.register,a=i.control,u=i.onSubmit,l=i.errors,c=i.tags;return(0,r.tZ)(M.Z,{open:n,onClose:t,children:(0,r.BX)(E,{onSubmit:u,children:[(0,r.tZ)(L,{children:"Save Bookmark"}),(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({},o("name")),{label:"name",type:"text",variant:"standard",fullWidth:!0,error:void 0!==l.name})),(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({},o("url")),{label:"url",type:"text",variant:"standard",fullWidth:!0,error:void 0!==l.url})),(0,r.tZ)(K.Qr,{name:"tags",control:a,render:function(e){var n=e.field,t=n.name,i=n.value,o=n.ref,a=n.onChange,u=n.onBlur;return(0,r.tZ)(F.Z,{multiple:!0,clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,freeSolo:!0,limitTags:2,value:i,options:c,onBlur:u,onChange:function(e,n){return a(n)},renderInput:function(e){return(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({},e),{name:t,ref:o,variant:"standard",type:"text",label:"tags"}))},filterOptions:function(e,n){var t=(0,P.D)()(e,n),r=n.inputValue;return""!==r&&e.every(function(e){return r!==e})&&t.push(r),t}})}}),(0,r.tZ)(D.Z,{variant:"contained",type:"submit",fullWidth:!0,children:"Save"})]})})},G=function(){var e=(0,o.Z)((0,i.useState)(!1),2),n=e[0],t=e[1],a=(0,o.Z)((0,i.useState)(),2),u=a[0],l=a[1],c=(0,i.useCallback)(function(e){l(e),t(!0)},[l,t]),s=(0,i.useCallback)(function(){l(void 0),t(!1)},[l,t]);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(A,{open:c}),(0,r.tZ)(q,{open:n,onClose:s,bookmark:u})]})},Q=t(155),J=t(3946),ee=t(2293),en=(0,u.Z)(ee.Z,{target:"epozlkt0"})("background:",function(e){return e.theme.colors.white},";"),et=t(9534),er=t(4914),ei=t(1664),eo=t.n(ei),ea=(0,u.Z)("a",{target:"e62qksh0"})({}),eu=i.forwardRef(function(e,n){var t=e.to,i=e.linkAs,o=e.replace,a=e.scroll,u=e.shallow,l=e.prefetch,c=e.legacyBehavior,s=e.locale,p=(0,et.Z)(e,["to","linkAs","replace","scroll","shallow","prefetch","legacyBehavior","locale"]);return(0,r.tZ)(eo(),{href:t,prefetch:l,as:i,replace:o,scroll:a,shallow:u,passHref:!0,locale:s,legacyBehavior:void 0===c||c,children:(0,r.tZ)(ea,(0,H.Z)({ref:n},p))})}),el=i.forwardRef(function(e,n){var t=e.as,i=e.href,o=e.legacyBehavior,a=e.linkAs,u=e.locale,l=e.noLinkStyle,c=e.prefetch,s=e.replace,p=e.scroll,d=e.shallow,f=(0,et.Z)(e,["as","href","legacyBehavior","linkAs","locale","noLinkStyle","prefetch","replace","scroll","shallow"]);if("string"==typeof i&&(0===i.indexOf("http")||0===i.indexOf("mailto:")))return l?(0,r.tZ)(ea,(0,H.Z)({href:i,ref:n},f)):(0,r.tZ)(er.Z,(0,H.Z)({href:i,ref:n},f));var h={to:i,linkAs:a||t,replace:s,scroll:p,shallow:d,prefetch:c,legacyBehavior:o,locale:u};return l?(0,r.tZ)(eu,(0,H.Z)({ref:n},h,f)):(0,r.tZ)(er.Z,(0,H.Z)({component:eu,ref:n},h,f))}),ec=(0,u.Z)("div",{target:"edphotv0"})("position:relative;width:100%;max-width:640px;margin:16px auto;"),es=(0,u.Z)("div",{target:"edphotv1"})("padding:0 0 0 16px;height:100%;position:absolute;pointer-events:none;display:flex;align-items:center;justify-content:center;"),ep=(0,u.Z)(F.Z,{target:"edphotv2"})("& .MuiInputBase-root{padding-left:42px;border-radius:160px;}"),ed=t(6506),ef=function(e){var n=e.options,t=e.onChange,i=void 0===t?function(){}:t;return(0,r.BX)(ec,{children:[(0,r.tZ)(es,{children:(0,r.tZ)(ed.Z,{color:"action"})}),(0,r.tZ)(ep,{placeholder:"Search…",freeSolo:!0,fullWidth:!0,options:void 0===n?[]:n,onInputChange:function(e,n){return i(n)},renderInput:function(e){return(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({},e),{type:"search",placeholder:"Search…"}))}})]})},eh=function(){var e=(0,k.S7)(),n=e.bookmarks,t=e.filter,r=(0,i.useMemo)(function(){return(0,V.Z)(new Set(n.flatMap(function(e){return e.tags}))).filter(function(e){return!!e})},[n]);return{bookmarks:n,tags:r,onSearch:(0,i.useCallback)(function(e){t({tags:[e]})},[t])}},eg=t(1988),eZ=i.memo(function(){var e=(0,k.aC)().signOut,n=eh(),t=n.tags,a=n.onSearch,u=(0,o.Z)(i.useState(null),2),l=u[0],c=u[1];return(0,r.tZ)(en,{position:"sticky",children:(0,r.BX)(Q.Z,{children:[(0,r.tZ)(ef,{options:t,onChange:a}),(0,r.tZ)(J.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},children:(0,r.tZ)(eg.Z,{sx:{fontSize:32}})}),(0,r.tZ)(w.Z,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!l,onClose:function(){c(null)},children:(0,r.tZ)(y.Z,{onClick:e,children:"Sign Out"})})]})})}),em=t(7357),ev=function(e){var n=e.children;return(0,r.BX)(em.Z,{children:[(0,r.tZ)(eZ,{}),n]})},eb=function(){return(0,r.tZ)(ev,{children:(0,r.tZ)(G,{})})};t(8522);var ex=(0,u.Z)("div",{target:"eeweitg0"})("display:grid;gap:8px;"),ek=(0,u.Z)("form",{target:"eeweitg1"})("display:flex;gap:8px;"),ew=t(6815),ey=N.z.object({email:N.z.string().email(),password:N.z.string().min(6)}),eS=function(){var e,n=(0,k.aC)().signIn,t=(0,o.Z)((0,i.useState)(null),2),a=t[0],u=t[1],l=(0,K.cI)({resolver:(0,W.F)(ey)}),c=l.handleSubmit,s=l.register,p=l.formState,d=(0,i.useCallback)(c((e=(0,R.Z)(function(e){return(0,T.__generator)(this,function(t){return n(e.email,e.password).catch(function(){u("メールアドレスまたはパスワードが間違っています")}),[2]})}),function(n){return e.apply(this,arguments)})),[c]);return(0,r.BX)(ex,{children:[(0,r.tZ)("h1",{children:"D-Prowser"}),(0,r.BX)(ek,{onSubmit:d,children:[(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({size:"small",type:"email",placeholder:"email",autoComplete:"email"},s("email")),{error:!!p.errors.email})),(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({size:"small",type:"password",placeholder:"password",autoComplete:"password"},s("password")),{error:!!p.errors.password})),(0,r.tZ)(D.Z,{size:"small",type:"submit",variant:"contained",children:"Sign In"})]}),(0,r.tZ)(ew.Z,{error:!0,children:a}),(0,r.tZ)(el,{href:"/signup",children:"Sign Up"})]})},eC=t(1259),ez=(0,u.Z)("div",{target:"e15iprb70"})("display:grid;gap:8px;"),eB=(0,u.Z)("form",{target:"e15iprb71"})("display:flex;gap:8px;"),e_=t(9048),eI=t(1163),eO=N.z.object({email:N.z.string().email(),password:N.z.string().min(6)}),eX=function(){var e,n=(0,eI.useRouter)(),t=(0,o.Z)((0,i.useState)(null),2),a=t[0],u=t[1],l=(0,K.cI)({resolver:(0,W.F)(eO)}),c=l.handleSubmit,s=l.register,p=l.formState,d=(0,i.useCallback)(c((e=(0,R.Z)(function(e){return(0,T.__generator)(this,function(t){return(0,eC.Xb)(e_.H.auth(),e.email,e.password).then(function(){n.push("/")}).catch(function(e){console.error(e),u("登録に失敗しました")}),[2]})}),function(n){return e.apply(this,arguments)})),[c]);return(0,r.BX)(ez,{children:[(0,r.tZ)("h1",{children:"D-Prowser"}),(0,r.BX)(eB,{onSubmit:d,children:[(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({size:"small",type:"email",placeholder:"email",autoComplete:"email"},s("email")),{error:!!p.errors.email})),(0,r.tZ)(U.Z,(0,j.Z)((0,H.Z)({size:"small",type:"password",placeholder:"password",autoComplete:"password"},s("password")),{error:!!p.errors.password})),(0,r.tZ)(D.Z,{size:"small",type:"submit",variant:"contained",children:"Sign Up"})]}),(0,r.tZ)(ew.Z,{error:!0,children:a})]})}},2885:function(e,n,t){t.d(n,{IH:function(){return f},Ue:function(){return c},U2:function(){return d},Pj:function(){return Z},Od:function(){return m}});var r,i,o,a,u=t(7632),l=function(e){var n=new URL(e),t=n.hostname,r=n.protocol;return"https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=".concat(r,"//").concat(t,"&size=128")},c=function(e){var n,t;return{id:(0,u.Z)(),name:e.name,url:e.url,icon:null!==(n=null==e?void 0:e.icon)&&void 0!==n?n:l(e.url),tags:null!==(t=null==e?void 0:e.tags)&&void 0!==t?t:[]}},s=t(7568),p=t(655),d=(r=(0,s.Z)(function(e,n){return(0,p.__generator)(this,function(t){return[2,n?e.search(n):e.read()]})}),function(e,n){return r.apply(this,arguments)}),f=(i=(0,s.Z)(function(e,n){return(0,p.__generator)(this,function(t){switch(t.label){case 0:return[4,e.create(n)];case 1:return t.sent(),[2]}})}),function(e,n){return i.apply(this,arguments)}),h=t(1799),g=t(9396),Z=(o=(0,s.Z)(function(e,n,t){var r;return(0,p.__generator)(this,function(i){switch(i.label){case 0:return[4,d(e)];case 1:if(!(void 0!==(r=i.sent().find(function(e){return e.id===n}))))return[3,3];return[4,e.update((0,g.Z)((0,h.Z)({},r,t),{id:n}))];case 2:i.sent(),i.label=3;case 3:return[2]}})}),function(e,n,t){return o.apply(this,arguments)}),m=(a=(0,s.Z)(function(e,n){return(0,p.__generator)(this,function(t){switch(t.label){case 0:return[4,e.delete(n)];case 1:return t.sent(),[2]}})}),function(e,n){return a.apply(this,arguments)})},9048:function(e,n,t){t.d(n,{H:function(){return r}});var r=t(4866).Z.initializeApp({apiKey:"AIzaSyAP9LewVkw8TGZVDXZz9fyvKL8HkOki5KI",authDomain:"d-prowser.firebaseapp.com",projectId:"d-prowser",storageBucket:"d-prowser.appspot.com",messagingSenderId:"627346574140",appId:"1:627346574140:web:7249e68584307147cfac39",measurementId:"G-N30LQ2PYRT"})},7722:function(e,n,t){t.d(n,{aC:function(){return f},S7:function(){return u},y$:function(){return o}});var r=t(7294),i=t(7607),o=function(){return{storage:(0,r.useContext)(i.Tm).storage}},a=t(2885),u=function(){var e=o().storage,n=(0,r.useContext)(i.bq),t=n.bookmarks,u=n.setBookmarks;return{bookmarks:t,filter:(0,r.useCallback)(function(n){return(0,a.U2)(e,n).then(u)},[e,u])}},l=t(7568),c=t(828),s=t(655);t(8522);var p=t(9048),d=t(1259),f=function(){var e,n,t=(0,c.Z)((0,r.useState)(!0),2),o=t[0],a=t[1],u=(0,r.useContext)(i.gX),f=u.user,h=u.setUser,g=(e=(0,l.Z)(function(e,n){return(0,s.__generator)(this,function(t){return a(!0),[2,(0,d.e5)(p.H.auth(),e,n)]})}),function(n,t){return e.apply(this,arguments)}),Z=(n=(0,l.Z)(function(){return(0,s.__generator)(this,function(e){return a(!0),[2,p.H.auth().signOut().then(function(){h(null)})]})}),function(){return n.apply(this,arguments)});return(0,r.useEffect)(function(){var e=p.H.auth().onAuthStateChanged(function(e){h(e),a(!1)});return function(){return e()}},[]),{user:f,loading:o,signIn:g,signOut:Z}}}}]);